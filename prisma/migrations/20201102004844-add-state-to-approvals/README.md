# Migration `20201102004844-add-state-to-approvals`

This migration has been generated by mcsdevv at 11/2/2020, 12:48:44 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."approvals" ADD COLUMN "state" text   NOT NULL DEFAULT E'requested'

ALTER TABLE "public"."members" ALTER COLUMN "tmuid" SET DEFAULT E''

CREATE INDEX "teams.handle_index" ON "public"."teams"("handle")

ALTER INDEX "public"."teams.handle_index" RENAME TO "teams.handle_unique"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201025111202-allow-null-foreign-keys-and-add-tmuid..20201102004844-add-state-to-approvals
--- datamodel.dml
+++ datamodel.dml
@@ -4,16 +4,16 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model teams {
   tuid            String    @id @default("")
   name            String    @default("")
   protected       Boolean
-  handle          String    @default("")
+  handle          String    @unique @default("")
   avatar          String    @default("")
   plan            String    @default("")
   tokenSecret     String    @default("") @map("token_secret")
   tokenKey        String    @default("") @map("token_key")
@@ -54,8 +54,9 @@
 model approvals {
   tauid String
   twuid String
   uid   String
+  state String @default("requested")
   tweet tweets @relation(fields: [twuid], references: [twuid])
   @@id([tauid, twuid])
 }
```


